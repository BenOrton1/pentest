<?php

namespace App\Services;

use Faker\Factory;
use App\Models\User;
use App\Repositories\TicketsRepository;

class TicketService
{
    public function generateFakeTickets()
    {
        $faker = Factory::create();
        $user = User::inRandomOrder()->first();

        $ticketData = [
            'subject' => $faker->sentence,
            'content' => $faker->paragraph,
            'user_name' => $user->name,
            'user_email' => $user->email,
            'status' => false,
        ];
        (new TicketsRepository)->create($ticketData);
    }

    public function processFakeTickets()
    {
        $tickets = (new TicketsRepository)->getUnprocessesTickets();
        foreach ($tickets as $ticket) {
            $ticket->status = true;
            $ticket->save();
        }
    }
}